<!DOCTYPE html>
<html lang="en">
<head>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homepage of Waterfall Model</title>
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body>
    <h1>start from here</h1>
    <div class="container">
        <!-- Project Form Section -->
        <div class="section" id="form-section">
            <form method="post" id="project-form">
                {{ form.as_p }}
                <button type="submit">Submit</button>
            </form>
            {% if success %}
                <p class="success-message">Form submitted successfully!</p>
            {% endif %}
        </div>

        <!-- Software Engineering Plan & Gantt Chart Section -->
        <div class="section" id="plan-section">
            <h2>Software Engineering Plan</h2>
            <p>Content placeholder for the software engineering plan report.</p>
        </div>

        <div class="section" id="gantt-chart">
            <h2>Gantt Chart</h2>
            <pre class="mermaid fade-in">
                gantt
                    title Software Development Process
                    dateFormat  YYYY-MM-DD
                    section Planning
                    Requirements Gathering :done, req1, 2025-01-01, 2025-01-05
                    System Design           :active, design1, 2025-01-06, 2025-01-10
                    section Development
                    Implementation          :dev, 2025-01-11, 2025-01-20
                    Testing                 :test, 2025-01-21, 2025-01-25
                    section Deployment
                    Deployment to Production:deploy, 2025-01-26, 2025-01-28
            </pre>
        </div>
    </div>

    <!-- Chatbox Button -->
    <div id="chatbox" onclick="toggleChatInterface()">
        ðŸ’¬
    </div>

    <!-- Chat Interface -->
    <div id="chat-interface">
        <iframe 
            src="https://copilotstudio.microsoft.com/environments/Default-76eeec46-fe40-4e1b-ab42-1d6d9f91b8a9/bots/crecf_KPfMFJk7duIysZGG55h-z/webchat?__version__=2" 
            frameborder="0">
        </iframe>
    </div>

    <script>
        document.getElementById("project-form").onsubmit = function() {
            document.getElementById("form-section").style.display = "none";
            document.getElementById("plan-section").style.display = "block";
            document.getElementById("gantt-chart").style.display = "block";
            return false;  // Prevent form submission to allow for dynamic changes
        };

        // Toggle the chat interface
        function toggleChatInterface() {
            var chatInterface = document.getElementById("chat-interface");
            if (chatInterface.style.display === "none" || chatInterface.style.display === "") {
                chatInterface.style.display = "block";
            } else {
                chatInterface.style.display = "none";
            }
        }
    </script>
</body>
</html>
